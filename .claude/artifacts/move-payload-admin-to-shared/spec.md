# Spec: Move `features/payload-admin` into `shared/payload`

## Goal

Merge `src/features/payload-admin/` into `src/shared/payload/` so all Payload CMS configuration lives in the shared layer, eliminating the architectural violation where `shared/` imports from `features/`.

## Context

Currently `shared/payload/blocks/`, `shared/payload/globals/`, and `shared/payload/collections/` import field factories and component paths from `features/payload-admin`. This breaks the ED architecture import rule: **shared layer MUST NOT import from features layer**.

The `payload-admin` module contains no business logic — only Payload admin UI components and field factory functions. It belongs in `shared/`.

### Current structure

```
src/features/payload-admin/
├── components/
│   ├── collection-reference-field.tsx   # 'use client' React component
│   ├── global-reference-field.tsx       # 'use client' React component
│   ├── menu-item-row-label.tsx          # 'use client' React component
│   ├── scroll-modal-info.tsx            # 'use client' React component
│   ├── scroll-triggers-help.tsx         # 'use client' React component
│   └── star-rating-field.tsx            # 'use client' React component
├── fields/
│   ├── collection-reference-field.ts    # Field factory function
│   ├── global-reference-field.ts        # Field factory function
│   └── index.ts                         # Re-exports factories + types
└── index.ts                             # Public API
```

### Target structure

```
src/shared/payload/
├── admin/                               # ← NEW (moved from features/payload-admin)
│   ├── components/
│   │   ├── collection-reference-field.tsx
│   │   ├── global-reference-field.tsx
│   │   ├── menu-item-row-label.tsx
│   │   ├── scroll-modal-info.tsx
│   │   ├── scroll-triggers-help.tsx
│   │   └── star-rating-field.tsx
│   ├── fields/
│   │   ├── collection-reference-field.ts
│   │   ├── global-reference-field.ts
│   │   └── index.ts
│   └── index.ts
├── blocks/                              # existing — update imports
├── collections/                         # existing — update imports
├── constants/                           # existing — no changes
├── globals/                             # existing — update imports
├── config.ts                            # existing — no changes
└── payload-types.ts                     # existing — no changes
```

## Requirements

- MUST move all files from `src/features/payload-admin/` into `src/shared/payload/admin/`
- MUST preserve the internal directory structure (`components/`, `fields/`, `index.ts`)
- MUST update all import statements referencing `@/features/payload-admin` to `@/shared/payload/admin`
- MUST update all hardcoded Payload component `path` strings from `@/features/payload-admin/...` to `@/shared/payload/admin/...`
- MUST regenerate `src/app/(payload)/admin/importMap.js` (auto-generated by Payload)
- MUST delete `src/features/payload-admin/` after migration
- MUST NOT change any component logic, types, or exports
- MUST NOT break existing Payload admin panel functionality

## Affected Files

### Files to move (10 files)

| Source | Destination |
|--------|-------------|
| `features/payload-admin/index.ts` | `shared/payload/admin/index.ts` |
| `features/payload-admin/fields/index.ts` | `shared/payload/admin/fields/index.ts` |
| `features/payload-admin/fields/collection-reference-field.ts` | `shared/payload/admin/fields/collection-reference-field.ts` |
| `features/payload-admin/fields/global-reference-field.ts` | `shared/payload/admin/fields/global-reference-field.ts` |
| `features/payload-admin/components/collection-reference-field.tsx` | `shared/payload/admin/components/collection-reference-field.tsx` |
| `features/payload-admin/components/global-reference-field.tsx` | `shared/payload/admin/components/global-reference-field.tsx` |
| `features/payload-admin/components/menu-item-row-label.tsx` | `shared/payload/admin/components/menu-item-row-label.tsx` |
| `features/payload-admin/components/scroll-modal-info.tsx` | `shared/payload/admin/components/scroll-modal-info.tsx` |
| `features/payload-admin/components/scroll-triggers-help.tsx` | `shared/payload/admin/components/scroll-triggers-help.tsx` |
| `features/payload-admin/components/star-rating-field.tsx` | `shared/payload/admin/components/star-rating-field.tsx` |

### Import statements to update (10 files)

| File | Change |
|------|--------|
| `shared/payload/blocks/doctors-block.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |
| `shared/payload/blocks/services-block.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |
| `shared/payload/blocks/feedbacks-block.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |
| `shared/payload/blocks/contact-block.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |
| `shared/payload/blocks/contact-info-block.ts` | `@/features/payload-admin/fields/...` → `@/shared/payload/admin/fields/...` |
| `shared/payload/blocks/faq-block.ts` | `@/features/payload-admin/fields/...` → `@/shared/payload/admin/fields/...` |
| `shared/payload/blocks/prices-block.ts` | `@/features/payload-admin/fields/...` → `@/shared/payload/admin/fields/...` |
| `shared/payload/blocks/blog-grid-with-faq-block.ts` | `@/features/payload-admin/fields/...` → `@/shared/payload/admin/fields/...` |
| `shared/payload/globals/site-settings.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |
| `shared/payload/globals/scroll-modal.ts` | `@/features/payload-admin` → `@/shared/payload/admin` |

### Hardcoded `path:` strings to update (7 locations)

| File | String to update |
|------|-----------------|
| `shared/payload/admin/fields/collection-reference-field.ts` | `path: '@/features/payload-admin/components/...'` → `path: '@/shared/payload/admin/components/...'` |
| `shared/payload/admin/fields/global-reference-field.ts` | `path: '@/features/payload-admin/components/...'` → `path: '@/shared/payload/admin/components/...'` |
| `shared/payload/globals/scroll-modal.ts` | 2× `path: '@/features/payload-admin/components/...'` → `path: '@/shared/payload/admin/components/...'` |
| `shared/payload/collections/feedbacks.ts` | `path: '@/features/payload-admin/components/...'` → `path: '@/shared/payload/admin/components/...'` |
| `shared/payload/collections/services.ts` | import from `@/features/payload-admin/fields/...` → `@/shared/payload/admin/fields/...` |

### Self-reference to update (1 file)

| File | Change |
|------|--------|
| `shared/payload/admin/components/collection-reference-field.tsx` | `import type { ... } from '@/features/payload-admin'` → `import type { ... } from '@/shared/payload/admin'` |

### Auto-generated file to regenerate

| File | Action |
|------|--------|
| `src/app/(payload)/admin/importMap.js` | Run `pnpm payload generate:importmap` after migration |

## Edge Cases

- **importMap.js** is auto-generated by Payload — do NOT manually edit, regenerate via CLI
- **Hardcoded string paths** (not import statements) — Payload uses these to resolve admin components at runtime; they MUST be updated
- **`menu-item-row-label.tsx`** — not currently referenced by any import or path string in the codebase; still move it to keep the module intact
- **No tsconfig alias changes needed** — all imports use `@/` prefix which maps to `./src/*`

## Out of Scope

- Refactoring component logic or types
- Adding a root `shared/payload/index.ts`
- Changing shared/payload internal architecture
- Updating any feature besides the path corrections

## Acceptance Criteria

- [ ] `src/features/payload-admin/` directory no longer exists
- [ ] `src/shared/payload/admin/` contains all 10 files with identical content (except updated paths)
- [ ] Zero references to `@/features/payload-admin` remain in the codebase (verified by grep)
- [ ] `pnpm payload generate:importmap` regenerates importMap.js with new paths
- [ ] `pnpm build` completes without errors
- [ ] Payload admin panel loads correctly (custom fields render properly)
